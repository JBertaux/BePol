<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BePol</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bulma/1.0.1/css/bulma.min.css" rel="stylesheet"
        integrity="sha384-u1DpPo/VC1cCewPdLA1ujElPdm1c/ZVa5MNAV6930PlrYYXhoKH/+hui6tE7szxu" crossorigin="anonymous">
    <link href="https://cdn.datatables.net/v/bm/jq-3.7.0/moment-2.29.4/dt-2.3.4/r-3.0.7/datatables.min.css" rel="stylesheet"
        integrity="sha384-L6M3wwo7OM+HjBiqmolGpslRiRqGELcKJfJbOLKZ5NoJoWcPH1cnDnOot8ay9/PI" crossorigin="anonymous">
    
    <script src="https://cdn.datatables.net/v/bm/jq-3.7.0/moment-2.29.4/dt-2.3.4/r-3.0.7/datatables.min.js"
        integrity="sha384-+2T4PjC2P0UJT4T3+Q6mKoswWWT7IuD29jRjU4pF9w4sJkMVGl4Yd+tbZNUn4wKJ"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="p-5 table-container">
        <table id="myTable" class="table is-striped is-narrow is-hoverable">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Nom de Parti</th>
                    <th>Titre</th>
                    <th>Description</th>
                    <th>URLs</th>
                </tr>
            </thead>
            <tbody>
                <!-- DATA HERE -->
            </tbody>
        </table>
    </div>

    <script>
        $(document).ready(function () {
            DataTable.datetime('DD/MM/YYYY');
            $('#myTable').DataTable({
                order: [[0, 'desc']],
                language: {
                    url: 'https://cdn.datatables.net/plug-ins/2.3.4/i18n/fr-FR.json',
                },
                ajax: {
                    url: 'https://jbertaux.github.io/BePol/data/articles.json',
                    dataSrc: ''
                },
                columns: [
                    { 
                        data: 'date',
                        render: function (data, type, row) {
                            return moment(data).format('DD/MM/YYYY');
                        }
                    },
                    { 
                        data: 'partis',
                        render: function (data, type, row) {
                            if (Array.isArray(data)) {
                                return data.join(', ');
                            }
                            return data;
                        }
                    },
                    { data: 'title' },
                    { data: 'summary' },
                    { 
                        data: 'urls',
                        render: function (data, type, row) {
                            if (Array.isArray(data)) {
                                return data.map(url => `<a href="${url}" target="_blank">Lien</a>`).join(', ');
                            }
                            return data;
                        }
                    },
                ]
            });
        });
    </script>
</body>

</html>